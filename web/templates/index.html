{{ define "home" }} {{ template "head" . }}
</head>

<body bgcolor="#EFEFEF">
    {{ if .LoggedIn }} {{ template "navbar" .}}
    <br>
    <div class="container is-max-desktop">
        <div class="columns">
            <div class="column is-9">
                {{ range .RecentEssays }}
                <div class="box" style="cursor: pointer;" onclick="window.location='/s/{{ .PostedIn }}/{{ .ID }}';">
                    <article class="media">
                        <figure class="media-left">
                            <p class="image is-64x64">
                                <img class="is-rounded" src="https://bulma.io/images/placeholders/128x128.png">
                            </p>
                        </figure>

                        <div class="media-content">
                            <div class="content">
                                <p>
                                    <strong>{{.Thesis}}</strong> <small>@autore</small> <small>{{.Published}}</small>
                                    <br> {{.Content}}
                                </p>

                            </div>

                            <nav class="level is-mobile">
                                <div class="level-left">

                                    <a onclick="javascript:fetch('/s/{{ .PostedIn }}/{{ .ID }}/favourite')" class="level-item" aria-label="reply">
                                        <span class="icon is-small has-text-danger">
                                            <i class="far fa-heart" aria-hidden="true"></i>
                                        </span>
                                    </a>

                                    <a onclick="javascript:fetch('/s/{{ .PostedIn }}/{{ .ID }}/like')" class="level-item" aria-label="reply">
                                        <span class="icon is-small has-text-primary">
                                            <i class="fa fa-arrow-up" aria-hidden="true"></i>
                                        </span>
                                    </a>
                                    <a onclick="javascript:fetch('/s/{{ .PostedIn }}/{{ .ID }}/dislike')" class="level-item" aria-label="retweet">
                                        <span class="icon is-small has-text-primary">
                                            <i class="fa fa-arrow-down" aria-hidden="true"></i>
                                        </span>
                                    </a>
                                    <a href='/s/{{ .PostedIn }}/{{ .ID }}/report' class="level-item" aria-label="like">
                                        <span class="icon is-small has-text-danger">
                                            <i class="fa fa-ban" aria-hidden="true"></i>
                                        </span>
                                    </a>
                                </div>
                            </nav>
                        </div>
                        <div class="media-right">
                            {{if eq .ReplyType "against" }}
                            <button class="button is-danger is-light">Agains</button> {{ else if eq .ReplyType "in favor"}}
                            <button class="button is-success is-light">Favour</button> {{ else }}
                            <button class="button is-warning is-light">General</button> {{ end }}

                        </div>
                    </article>
                </div>

                {{ end }}
            </div>
            <div class="column is-3">
                <div class="card events-card">
                    <nav class="panel is-primary">
                        <p class="panel-heading">Your Communities</p>
                        {{ range .MySubdisceptos }}
                        <a href="s/{{ . }}" class="panel-block">s/{{ . }}</a> {{ end }}
                    </nav>
                </div>
            </div>

            {{ else }}
            <script>
                window.location = '/login';
            </script>
            {{ end }} {{ end }}